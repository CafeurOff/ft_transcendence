<!DOCTYPE html>
{% load static %}
{% include "./base/navbar.html" %}


<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="{% static 'css/profile.css' %}">
        <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
        <link rel="shortcut icon" type="image/png" href="{% static 'images/favicon.png' %}">
        <title>Transcendence</title>
    </head>
    <body class="w-100">
        
        <div class="mx-5 mt-3">
            <h4 class="text-white">PINGPONG</h4>
        
            <div class="information-container p-3 mt-2 text-white">
                <p class="fw-bold fs-4 mb-2">üìà Votre Profil !</p>
                <p class="fw-medium fs-6">Vous √™tes actuellement sur la page de profil. Ici, vous pouvez voir vos informations personnelles, vos statistiques de jeu et bien plus encore !</p>
            </div>

            <div class="row mt-5 text-left fs-5 fw-medium">
                <div class="col-12 col-md-4">
                    <div class="info-box mb-5">
                        <div class="mb-3">
                            <p for="username" class="form-label text-white fw-bold fs-4">Nombre de matchs</p>
                            <p class="form-label text-secondary fw-lighter fs-6">Nombre de matchs jou√©s</p>
                            <div class="mb-2">
                                <p class="text-white fs-3 fw-bold">{{ total_matches }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <div class="info-box mb-5">
                        <div class="mb-3">
                            <p for="username" class="form-label text-white fw-bold fs-4">Nombre de victoires</p>
                            <p class="form-label text-secondary fw-lighter fs-6">Nombre de matchs gagn√©s</p>
                            <div class="mb-2">
                                <p class="text-white fs-3 fw-bold">{{ win }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <div class="info-box mb-5">
                        <div class="mb-3">
                            <p for="username" class="form-label text-white fw-bold fs-4">Nombre de d√©faite</p>
                            <p class="form-label text-secondary fw-lighter fs-6">Nombre de matchs perdu</p>
                            <div class="mb-2">
                                <p class="text-white fs-3 fw-bold">{{ lose }}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-15">
                    <div class="info-box mb-5">
                        <div class="mb-3">
                            <p for="username" class="form-label text-white fw-bold fs-4">Historique des matchs</p>
                            <p class="form-label text-secondary fw-lighter fs-6">Liste des matchs jou√©s</p>
                            <div class="mb-2">
                                <ul class="text-white fs-5 fw-lighter">
                                    {% for match_with_date in data.matches_with_date %}
                                        <li>
                                            {{ match_with_date.1|date:"d/m H:i" }} | 
                                            {% if forloop.counter <= data.win_matches %}
                                                <span class="text-success">Match <span class="fw-bold">gagn√©</span></span>
                                            {% else %}
                                                <span class="text-danger">Match <span class="fw-bold">perdu</span></span>
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="chart-container" class="mx-5 mt-5">
                    <rect x="0" y="0" width="100%" height="200" stroke="none" stroke-width="0" fill="#242222"></rect>
                </div>

                <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
                <script type="text/javascript">
                    google.charts.load('current', {'packages':['corechart']});
                    google.charts.setOnLoadCallback(drawChart);
                    function drawChart() {
                        var data = google.visualization.arrayToDataTable([
                            ['Statistiques', 'Pourcentage'],
                            ['Victoires', {{ win }}],
                            ['D√©faites', {{ lose }}]
                        ]);
        
                        var options = {
                            backgroundColor : '#1C1B1B',
                            title: 'R√©partition des victoires et des d√©faites',
                            pieHole: 0.4,
                            colors: ['#4CAF50', '#F44336'] 
                        };
        
                        var chart = new google.visualization.PieChart(document.getElementById('chart-container'));
        
                        chart.draw(data, options);
                    }
                </script>
            </div>
        </div>
    </body>
</html>